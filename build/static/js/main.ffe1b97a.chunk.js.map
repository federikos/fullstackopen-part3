{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","onChange","PersonForm","onSubmit","newName","newNumber","handleNameChange","handleNumberChange","value","type","Persons","persons","onClick","map","person","key","id","name","number","baseUrl","axios","get","then","res","data","newObj","post","delete","updObj","put","Notification","successMsg","errorMsg","className","App","useState","setPersons","filteredPersons","setFilteredPersons","showFiltered","setShowFiltered","setNewName","setNewNumber","filterValue","setFilterValue","setSuccessMsg","setErrorMsg","useEffect","personService","initialPersons","catch","e","message","setTimeout","target","filter","toLowerCase","includes","preventDefault","newPersonObj","foundPerson","find","alert","window","confirm","updatedPerson","returnedPerson","concat","response","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ffe1b97a.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ onChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input onChange={onChange} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({onSubmit, newName, newNumber, handleNameChange, handleNumberChange}) => (\r\n  <form onSubmit={onSubmit}>\r\n    <div>\r\n      name: <input value={newName} onChange={handleNameChange} />\r\n    </div>\r\n    <div>\r\n      number: <input value={newNumber} onChange={handleNumberChange} /></div>\r\n    <div>\r\n      <button type=\"submit\">add</button>\r\n    </div>\r\n  </form>\r\n)\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Persons = ({ persons, onClick }) => (\r\n  <div>\r\n  { persons.map(person => <p key={person.id}>{person.name} {person.number} <button onClick={onClick(person.id, person.name)}>delete</button></p>) }\r\n  </div>\r\n)\r\n\r\nexport default Persons;","import axios from 'axios'\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n    .then(res => res.data)\r\n}\r\n\r\nconst create = newObj => {\r\n  return axios.post(baseUrl, newObj)\r\n    .then(res => res.data)\r\n}\r\n\r\nconst del = id => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nconst updateNumber = (id, updObj) => {\r\n  return axios.put(`${baseUrl}/${id}`, updObj)\r\n    .then(res => res.data)\r\n}\r\n\r\nexport default { getAll, create, del, updateNumber }","import React from 'react'\r\nimport './Notification.css'\r\n\r\nconst Notification = ({ successMsg, errorMsg }) => {\r\n  if (successMsg) {\r\n    return (\r\n      <div className=\"success\">\r\n        {successMsg}\r\n      </div>\r\n    )\r\n  }\r\n  if (errorMsg) {\r\n    return (\r\n    <div className=\"error\">\r\n      {errorMsg}\r\n    </div>\r\n    )\r\n  }\r\n  return '';\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Filter from './components/Filter'\r\nimport PersonForm from './components/PersonForm'\r\nimport Persons from './components/Persons'\r\nimport personService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ filteredPersons, setFilteredPersons ] = useState([])\r\n  const [ showFiltered, setShowFiltered ] = useState(false)\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ filterValue, setFilterValue] = useState('')\r\n  const [ successMsg, setSuccessMsg ] = useState(null)\r\n  const [ errorMsg, setErrorMsg ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n        .then(initialPersons => setPersons(initialPersons))\r\n        .catch(e => {\r\n          setErrorMsg(e.message);\r\n          setTimeout(() => setErrorMsg(null), 5000)\r\n        })\r\n  }, []);\r\n  \r\n  const handleFormSubmit = e => {\r\n    e.preventDefault();\r\n    const newPersonObj = {name: newName, number: newNumber};\r\n    const foundPerson = persons.find(person => person.name === newName);\r\n\r\n    if (!foundPerson) {\r\n      personService\r\n        .create(newPersonObj)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.concat(returnedPerson))\r\n            setSuccessMsg(`New contact '${newName}' has been successfully added to the phonebook`);\r\n            setTimeout(() => setSuccessMsg(null), 5000);\r\n            setNewName('');\r\n            setNewNumber('');\r\n          })\r\n          .catch(e => {\r\n            setErrorMsg(e.response.data.error);\r\n            setTimeout(() => setErrorMsg(null), 5000)\r\n          })\r\n    } else {\r\n      if (foundPerson.number === newNumber) {\r\n        alert(`${newName} is already added to phonebook`);\r\n      } else {\r\n        window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\r\n        &&\r\n        personService\r\n          .updateNumber(foundPerson.id, newPersonObj)\r\n            .then(updatedPerson => {\r\n              setPersons(persons.map(person => person.id !== updatedPerson.id ? person : updatedPerson))\r\n              setNewName('');\r\n              setNewNumber('');\r\n            })\r\n            .catch(e => {\r\n              setErrorMsg(`the contact ${newName} was already deleted from server`)\r\n              setTimeout(() => setErrorMsg(null), 5000)\r\n              setPersons(persons.filter(person => person.id !== foundPerson.id))\r\n            })\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleNameChange = e => setNewName(e.target.value);\r\n  const handleNumberChange = e => setNewNumber(e.target.value);\r\n\r\n  const handlefilterValueChange = e => {\r\n    setFilterValue(e.target.value)\r\n    \r\n    e.target.value === ''\r\n    ? setShowFiltered(false)\r\n    : setShowFiltered(true)\r\n\r\n    setFilteredPersons(persons.filter(person => {\r\n      return person.name.toLowerCase().includes(e.target.value.toLowerCase());\r\n    }))\r\n  }\r\n\r\n  const handleDelClick = (id, name) => () => {\r\n    window.confirm(`Delete ${name}? Seriously?`)\r\n    &&\r\n    personService\r\n      .del(id)\r\n        .then(() => setPersons(persons.filter(person => person.id !== id)))\r\n        .catch(e => {\r\n          setErrorMsg(`hasn't been able to remove ${name}, error: ${e.message}`);\r\n          setTimeout(() => setErrorMsg(null), 5000)\r\n        })\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification successMsg={successMsg} errorMsg={errorMsg} />\r\n      <Filter value={filterValue} onChange={handlefilterValueChange} />\r\n      <h2>Add a new</h2>\r\n      <PersonForm \r\n        onSubmit={handleFormSubmit} \r\n        newName={newName} \r\n        newNumber={newNumber} \r\n        handleNameChange={handleNameChange} \r\n        handleNumberChange={handleNumberChange} \r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons persons={showFiltered ? filteredPersons : persons} onClick={handleDelClick} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}